# Database Configuration
# DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require

# Google OAuth Configuration
GOOGLE_CLIENT_ID=your-google-client-id-here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# JWT Configuration
# JWT_SECRET=your-secret-key-change-in-production

# Frontend URL
FRONTEND_URL=https://connectbot-ai-frontend.vercel.app

# Node Environment
NODE_ENV=production

# Google OAuth Callback URL
# GOOGLE_CALLBACK_URL=https://your-backend-url.railway.app/api/auth/google/callback

# Server Port (Railway sets this automatically)
# PORT=3001


WEBHOOK_ENDPOINT=https://auto.nsolbpo.com/webhook/upload-documents
AGENT_DOCUMENT_WEBHOOK_URL=https://auto.nsolbpo.com/webhook/upload-documents
AGENT_FILES_BUCKET=agent-files
EXTRACTOR_MAX_FILE_BYTES=10485760

# Webhook Configuration - Unified Message Webhook
# Single webhook URL receives all messages with 'source' flag
# source='whatsapp' for external WhatsApp messages
# source='dashboard' for internal dashboard chat messages
# The webhook receiver can filter based on source flag
WHATSAPP_MESSAGE_WEBHOOK_PROD=https://auto.nsolbpo.com/webhook/a18ff948-9380-4abe-a8d8-0912dae2d8ab

# Database Configuration - Using Supabase Direct Connection
DATABASE_URL=postgresql://user:password@host:port/database

# Supabase Configuration
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-here
SUPABASE_JWT_SECRET=your-supabase-jwt-secret-here
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here
# Server Configuration
PORT=3001
NODE_ENV=development

# CORS Configuration
FRONTEND_URL=http://localhost:5173
BAILEYS_SESSION_PATH=./sessions

# Webhook Configuration - Enhanced Message Handler
WEBHOOK_ENV=production
# N8N_WEBHOOK_URL=https://nsolbpo.app.n8n.cloud/webhook/whatsapp-webhook
N8N_WEBHOOK_URL=https://auto.nsolbpo.com/webhook/whatsapp-webhook
# WEBHOOK_ENV=test

# N8N_WEBHOOK_URL=https://nsolbpo.app.n8n.cloud/webhook-test/whatsapp-webhook
N8N_WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_MAX_ATTEMPTS=3
WEBHOOK_RETRY_INITIAL_DELAY=2000

# Email Webhook Configuration
# Default: https://auto.nsolbpo.com/webhook/pa-email
# Can be overridden with EXTERNAL_WEBHOOK_URL or EMAIL_WEBHOOK_URL
EMAIL_WEBHOOK_URL=https://auto.nsolbpo.com/webhook/pa-email

WEBHOOK_ENDPOINT=https://auto.nsolbpo.com/webhook/upload-documents
AGENT_DOCUMENT_WEBHOOK_URL=https://auto.nsolbpo.com/webhook/upload-documents
AGENT_FILES_BUCKET=agent-files
EXTRACTOR_MAX_FILE_BYTES=10485760

WHATSAPP_MESSAGE_WEBHOOK_PROD=https://auto.nsolbpo.com/webhook/a18ff948-9380-4abe-a8d8-0912dae2d8ab


# Pinecone Vector Store (required for document embeddings)
# Create a dense index with dimension 1536 (e.g. metric=dotproduct or cosine)
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_INDEX_NAME=agentfiles
PINECONE_ENVIRONMENT=us-east-1
# Optional: override default chunk size/overlap
PINECONE_CHUNK_WORDS=500
PINECONE_CHUNK_OVERLAP=50

# OpenAI Embeddings
OPENAI_API_KEY=sk-your-openai-api-key-here
# Defaults to text-embedding-3-small when unset
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002

ALLOWED_ORIGINS=http://localhost:3001,http://localhost:8080,http://localhost:5173

# ============================================
# REDIS CONFIGURATION - Phase 3
# ============================================

# Redis connection
REDIS_URL=redis://localhost:6379
# For production with password:
# REDIS_URL=redis://:password@host:6379

# Redis cache settings
REDIS_SESSION_TTL=300          # 5 minutes
REDIS_CREDENTIAL_TTL=900       # 15 minutes
REDIS_KEY_PREFIX=baileys:      # Namespace for keys
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# Optional: Redis Cluster (for high availability)
# REDIS_CLUSTER_NODES=host1:6379,host2:6379,host3:6379

# Credentials Encryption (required for security)
CREDENTIALS_ENCRYPTION_KEY=your-64-character-hex-key-here

# ============================================
# INSTANCE MANAGEMENT - Phase 3B
# ============================================

# Instance identification (auto-generated if not set)
# INSTANCE_ID=server-1

# Instance configuration
MAX_AGENTS_PER_INSTANCE=200
INSTANCE_HEARTBEAT_INTERVAL=15000    # 15 seconds
INSTANCE_HEARTBEAT_TIMEOUT=45000     # 45 seconds (3x heartbeat interval)

# Load balancing
ENABLE_LOAD_BALANCING=true
AUTO_FAILOVER=true
